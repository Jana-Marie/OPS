ARM GAS  /tmp/ccEOQkiF.s 			page 1


   1              		.cpu cortex-m0
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"MP8862.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.MP8862_isReady,"ax",%progbits
  16              		.align	1
  17              		.global	MP8862_isReady
  18              		.arch armv6s-m
  19              		.syntax unified
  20              		.code	16
  21              		.thumb_func
  22              		.fpu softvfp
  24              	MP8862_isReady:
  25              	.LVL0:
  26              	.LFB41:
  27              		.file 1 "Core/Src/MP8862.c"
   1:Core/Src/MP8862.c **** /*
   2:Core/Src/MP8862.c **** * MP8862 - 2.8V-22V VIN, 2A IOUT, 4-Switch, Integrated Buck-Boost Converter with I2C Interface
   3:Core/Src/MP8862.c **** *
   4:Core/Src/MP8862.c **** * Author  : Helge B. Wurst
   5:Core/Src/MP8862.c **** * Created : 2021-07-14
   6:Core/Src/MP8862.c **** * License : Creative Commons - Attribution - ShareAlike 3.0
   7:Core/Src/MP8862.c **** */
   8:Core/Src/MP8862.c **** 
   9:Core/Src/MP8862.c **** #include "MP8862.h"
  10:Core/Src/MP8862.c **** 
  11:Core/Src/MP8862.c **** uint8_t MP8862_init(struct MP8862_t *_MP8862, I2C_HandleTypeDef *_hI2C, uint8_t addr) {
  12:Core/Src/MP8862.c ****     _MP8862->hI2C = _hI2C;
  13:Core/Src/MP8862.c ****     _MP8862->deviceAddress = addr;
  14:Core/Src/MP8862.c ****     uint8_t initialized   = MP8862_isReady(_MP8862);
  15:Core/Src/MP8862.c ****     _MP8862->VOUT_soft_limit_mV = 22000;
  16:Core/Src/MP8862.c ****     _MP8862->IOUT_soft_limit_mA = 3000;
  17:Core/Src/MP8862.c ****     return initialized;
  18:Core/Src/MP8862.c **** }
  19:Core/Src/MP8862.c **** 
  20:Core/Src/MP8862.c **** uint8_t MP8862_isReady(struct MP8862_t *_MP8862) {
  28              		.loc 1 20 50 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 20 50 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  21:Core/Src/MP8862.c ****     return HAL_OK == HAL_I2C_IsDeviceReady(_MP8862->hI2C, _MP8862->deviceAddress << 1, 3, 5);
ARM GAS  /tmp/ccEOQkiF.s 			page 2


  38              		.loc 1 21 5 is_stmt 1 view .LVU2
  39              		.loc 1 21 66 is_stmt 0 view .LVU3
  40 0002 0179     		ldrb	r1, [r0, #4]
  41              		.loc 1 21 22 view .LVU4
  42 0004 4900     		lsls	r1, r1, #1
  43 0006 0068     		ldr	r0, [r0]
  44              	.LVL1:
  45              		.loc 1 21 22 view .LVU5
  46 0008 0523     		movs	r3, #5
  47 000a 0322     		movs	r2, #3
  48 000c FFF7FEFF 		bl	HAL_I2C_IsDeviceReady
  49              	.LVL2:
  50              		.loc 1 21 19 view .LVU6
  51 0010 4342     		rsbs	r3, r0, #0
  52 0012 5841     		adcs	r0, r0, r3
  53 0014 C0B2     		uxtb	r0, r0
  22:Core/Src/MP8862.c **** }
  54              		.loc 1 22 1 view .LVU7
  55              		@ sp needed
  56 0016 10BD     		pop	{r4, pc}
  57              		.cfi_endproc
  58              	.LFE41:
  60              		.section	.text.MP8862_init,"ax",%progbits
  61              		.align	1
  62              		.global	MP8862_init
  63              		.syntax unified
  64              		.code	16
  65              		.thumb_func
  66              		.fpu softvfp
  68              	MP8862_init:
  69              	.LVL3:
  70              	.LFB40:
  11:Core/Src/MP8862.c ****     _MP8862->hI2C = _hI2C;
  71              		.loc 1 11 87 is_stmt 1 view -0
  72              		.cfi_startproc
  73              		@ args = 0, pretend = 0, frame = 0
  74              		@ frame_needed = 0, uses_anonymous_args = 0
  11:Core/Src/MP8862.c ****     _MP8862->hI2C = _hI2C;
  75              		.loc 1 11 87 is_stmt 0 view .LVU9
  76 0000 10B5     		push	{r4, lr}
  77              	.LCFI1:
  78              		.cfi_def_cfa_offset 8
  79              		.cfi_offset 4, -8
  80              		.cfi_offset 14, -4
  81 0002 0400     		movs	r4, r0
  12:Core/Src/MP8862.c ****     _MP8862->deviceAddress = addr;
  82              		.loc 1 12 5 is_stmt 1 view .LVU10
  12:Core/Src/MP8862.c ****     _MP8862->deviceAddress = addr;
  83              		.loc 1 12 19 is_stmt 0 view .LVU11
  84 0004 0160     		str	r1, [r0]
  13:Core/Src/MP8862.c ****     uint8_t initialized   = MP8862_isReady(_MP8862);
  85              		.loc 1 13 5 is_stmt 1 view .LVU12
  13:Core/Src/MP8862.c ****     uint8_t initialized   = MP8862_isReady(_MP8862);
  86              		.loc 1 13 28 is_stmt 0 view .LVU13
  87 0006 0271     		strb	r2, [r0, #4]
  14:Core/Src/MP8862.c ****     _MP8862->VOUT_soft_limit_mV = 22000;
  88              		.loc 1 14 5 is_stmt 1 view .LVU14
ARM GAS  /tmp/ccEOQkiF.s 			page 3


  14:Core/Src/MP8862.c ****     _MP8862->VOUT_soft_limit_mV = 22000;
  89              		.loc 1 14 29 is_stmt 0 view .LVU15
  90 0008 FFF7FEFF 		bl	MP8862_isReady
  91              	.LVL4:
  15:Core/Src/MP8862.c ****     _MP8862->IOUT_soft_limit_mA = 3000;
  92              		.loc 1 15 5 is_stmt 1 view .LVU16
  15:Core/Src/MP8862.c ****     _MP8862->IOUT_soft_limit_mA = 3000;
  93              		.loc 1 15 33 is_stmt 0 view .LVU17
  94 000c 024B     		ldr	r3, .L3
  95 000e E380     		strh	r3, [r4, #6]
  16:Core/Src/MP8862.c ****     return initialized;
  96              		.loc 1 16 5 is_stmt 1 view .LVU18
  16:Core/Src/MP8862.c ****     return initialized;
  97              		.loc 1 16 33 is_stmt 0 view .LVU19
  98 0010 024B     		ldr	r3, .L3+4
  99 0012 2381     		strh	r3, [r4, #8]
  17:Core/Src/MP8862.c **** }
 100              		.loc 1 17 5 is_stmt 1 view .LVU20
  18:Core/Src/MP8862.c **** 
 101              		.loc 1 18 1 is_stmt 0 view .LVU21
 102              		@ sp needed
 103              	.LVL5:
  18:Core/Src/MP8862.c **** 
 104              		.loc 1 18 1 view .LVU22
 105 0014 10BD     		pop	{r4, pc}
 106              	.L4:
 107 0016 C046     		.align	2
 108              	.L3:
 109 0018 F0550000 		.word	22000
 110 001c B80B0000 		.word	3000
 111              		.cfi_endproc
 112              	.LFE40:
 114              		.section	.text.MP8862_write,"ax",%progbits
 115              		.align	1
 116              		.global	MP8862_write
 117              		.syntax unified
 118              		.code	16
 119              		.thumb_func
 120              		.fpu softvfp
 122              	MP8862_write:
 123              	.LVL6:
 124              	.LFB42:
  23:Core/Src/MP8862.c **** 
  24:Core/Src/MP8862.c **** uint8_t MP8862_write(struct MP8862_t *_MP8862, enum MP8862_register reg, uint8_t *data, uint8_t len
 125              		.loc 1 24 103 is_stmt 1 view -0
 126              		.cfi_startproc
 127              		@ args = 0, pretend = 0, frame = 0
 128              		@ frame_needed = 0, uses_anonymous_args = 0
 129              		.loc 1 24 103 is_stmt 0 view .LVU24
 130 0000 30B5     		push	{r4, r5, lr}
 131              	.LCFI2:
 132              		.cfi_def_cfa_offset 12
 133              		.cfi_offset 4, -12
 134              		.cfi_offset 5, -8
 135              		.cfi_offset 14, -4
 136 0002 85B0     		sub	sp, sp, #20
 137              	.LCFI3:
ARM GAS  /tmp/ccEOQkiF.s 			page 4


 138              		.cfi_def_cfa_offset 32
 139 0004 1500     		movs	r5, r2
  25:Core/Src/MP8862.c ****     // S
  26:Core/Src/MP8862.c ****     // deviceAddress << 1 | 0 : ACK : REG_ADDR : ACK
  27:Core/Src/MP8862.c ****     // DATA0 : ACK [ : DATA1* : ACK [ : ... ]]
  28:Core/Src/MP8862.c ****     // P
  29:Core/Src/MP8862.c ****     // *: Register addresses are post-incremented, and *** read-only registers will be skipped ***.
  30:Core/Src/MP8862.c ****     return HAL_OK == HAL_I2C_Mem_Write(_MP8862->hI2C, _MP8862->deviceAddress << 1, reg, 1, data, le
 140              		.loc 1 30 5 is_stmt 1 view .LVU25
 141              		.loc 1 30 62 is_stmt 0 view .LVU26
 142 0006 0479     		ldrb	r4, [r0, #4]
 143              		.loc 1 30 22 view .LVU27
 144 0008 0A00     		movs	r2, r1
 145              	.LVL7:
 146              		.loc 1 30 22 view .LVU28
 147 000a 6100     		lsls	r1, r4, #1
 148              	.LVL8:
 149              		.loc 1 30 22 view .LVU29
 150 000c 0068     		ldr	r0, [r0]
 151              	.LVL9:
 152              		.loc 1 30 22 view .LVU30
 153 000e 0524     		movs	r4, #5
 154 0010 0294     		str	r4, [sp, #8]
 155 0012 0193     		str	r3, [sp, #4]
 156 0014 0095     		str	r5, [sp]
 157 0016 0123     		movs	r3, #1
 158              	.LVL10:
 159              		.loc 1 30 22 view .LVU31
 160 0018 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 161              	.LVL11:
 162              		.loc 1 30 19 view .LVU32
 163 001c 4342     		rsbs	r3, r0, #0
 164 001e 5841     		adcs	r0, r0, r3
 165 0020 C0B2     		uxtb	r0, r0
  31:Core/Src/MP8862.c **** }
 166              		.loc 1 31 1 view .LVU33
 167 0022 05B0     		add	sp, sp, #20
 168              		@ sp needed
 169              	.LVL12:
 170              		.loc 1 31 1 view .LVU34
 171 0024 30BD     		pop	{r4, r5, pc}
 172              		.cfi_endproc
 173              	.LFE42:
 175              		.section	.text.MP8862_read,"ax",%progbits
 176              		.align	1
 177              		.global	MP8862_read
 178              		.syntax unified
 179              		.code	16
 180              		.thumb_func
 181              		.fpu softvfp
 183              	MP8862_read:
 184              	.LVL13:
 185              	.LFB43:
  32:Core/Src/MP8862.c **** 
  33:Core/Src/MP8862.c **** uint8_t MP8862_read(struct MP8862_t *_MP8862, enum MP8862_register reg, uint8_t *data, uint8_t len 
 186              		.loc 1 33 102 is_stmt 1 view -0
 187              		.cfi_startproc
ARM GAS  /tmp/ccEOQkiF.s 			page 5


 188              		@ args = 0, pretend = 0, frame = 0
 189              		@ frame_needed = 0, uses_anonymous_args = 0
 190              		.loc 1 33 102 is_stmt 0 view .LVU36
 191 0000 30B5     		push	{r4, r5, lr}
 192              	.LCFI4:
 193              		.cfi_def_cfa_offset 12
 194              		.cfi_offset 4, -12
 195              		.cfi_offset 5, -8
 196              		.cfi_offset 14, -4
 197 0002 85B0     		sub	sp, sp, #20
 198              	.LCFI5:
 199              		.cfi_def_cfa_offset 32
 200 0004 1500     		movs	r5, r2
  34:Core/Src/MP8862.c ****     // S
  35:Core/Src/MP8862.c ****     // deviceAddress << 1 | 0 : ACK : REG_ADDR_K : ACK
  36:Core/Src/MP8862.c ****     // Sr
  37:Core/Src/MP8862.c ****     // deviceAddress << 1 | 1 : ACK : BYTE K [: ACK : BYTE K+1* [ : ... ]] : NACK
  38:Core/Src/MP8862.c ****     // P
  39:Core/Src/MP8862.c ****     // *: Datasheet p.23 I2C write and read examples do not mention multi-byte read, but experiment
  40:Core/Src/MP8862.c ****     //    - when master ACK is sent instead of NACK, multiple bytes can be read from auto-increment
  41:Core/Src/MP8862.c ****     //    - unmapped register addresses 0x0D ... 0x26 and 0x2A .. 0xFF read as 0x00
  42:Core/Src/MP8862.c ****     //    -
  43:Core/Src/MP8862.c ****     return HAL_OK == HAL_I2C_Mem_Read( _MP8862->hI2C, _MP8862->deviceAddress << 1, reg, 1, data, le
 201              		.loc 1 43 5 is_stmt 1 view .LVU37
 202              		.loc 1 43 62 is_stmt 0 view .LVU38
 203 0006 0479     		ldrb	r4, [r0, #4]
 204              		.loc 1 43 22 view .LVU39
 205 0008 0A00     		movs	r2, r1
 206              	.LVL14:
 207              		.loc 1 43 22 view .LVU40
 208 000a 6100     		lsls	r1, r4, #1
 209              	.LVL15:
 210              		.loc 1 43 22 view .LVU41
 211 000c 0068     		ldr	r0, [r0]
 212              	.LVL16:
 213              		.loc 1 43 22 view .LVU42
 214 000e 0524     		movs	r4, #5
 215 0010 0294     		str	r4, [sp, #8]
 216 0012 0193     		str	r3, [sp, #4]
 217 0014 0095     		str	r5, [sp]
 218 0016 0123     		movs	r3, #1
 219              	.LVL17:
 220              		.loc 1 43 22 view .LVU43
 221 0018 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 222              	.LVL18:
 223              		.loc 1 43 19 view .LVU44
 224 001c 4342     		rsbs	r3, r0, #0
 225 001e 5841     		adcs	r0, r0, r3
 226 0020 C0B2     		uxtb	r0, r0
  44:Core/Src/MP8862.c **** }
 227              		.loc 1 44 1 view .LVU45
 228 0022 05B0     		add	sp, sp, #20
 229              		@ sp needed
 230              	.LVL19:
 231              		.loc 1 44 1 view .LVU46
 232 0024 30BD     		pop	{r4, r5, pc}
 233              		.cfi_endproc
ARM GAS  /tmp/ccEOQkiF.s 			page 6


 234              	.LFE43:
 236              		.section	.text.MP8862_setEnable,"ax",%progbits
 237              		.align	1
 238              		.global	MP8862_setEnable
 239              		.syntax unified
 240              		.code	16
 241              		.thumb_func
 242              		.fpu softvfp
 244              	MP8862_setEnable:
 245              	.LVL20:
 246              	.LFB44:
  45:Core/Src/MP8862.c **** 
  46:Core/Src/MP8862.c **** uint8_t MP8862_setEnable(struct MP8862_t *_MP8862, uint8_t soft_EN) {
 247              		.loc 1 46 69 is_stmt 1 view -0
 248              		.cfi_startproc
 249              		@ args = 0, pretend = 0, frame = 8
 250              		@ frame_needed = 0, uses_anonymous_args = 0
 251              		.loc 1 46 69 is_stmt 0 view .LVU48
 252 0000 30B5     		push	{r4, r5, lr}
 253              	.LCFI6:
 254              		.cfi_def_cfa_offset 12
 255              		.cfi_offset 4, -12
 256              		.cfi_offset 5, -8
 257              		.cfi_offset 14, -4
 258 0002 83B0     		sub	sp, sp, #12
 259              	.LCFI7:
 260              		.cfi_def_cfa_offset 24
 261 0004 0500     		movs	r5, r0
  47:Core/Src/MP8862.c ****     uint8_t reg;
 262              		.loc 1 47 5 is_stmt 1 view .LVU49
  48:Core/Src/MP8862.c ****     uint8_t success = MP8862_read(_MP8862, MP8862_REG_CTL1 , &reg, 1 );
 263              		.loc 1 48 5 view .LVU50
 264              		.loc 1 48 23 is_stmt 0 view .LVU51
 265 0006 0123     		movs	r3, #1
 266 0008 6A46     		mov	r2, sp
 267 000a 0732     		adds	r2, r2, #7
 268 000c 0421     		movs	r1, #4
 269              	.LVL21:
 270              		.loc 1 48 23 view .LVU52
 271 000e FFF7FEFF 		bl	MP8862_read
 272              	.LVL22:
 273              		.loc 1 48 23 view .LVU53
 274 0012 0400     		movs	r4, r0
 275              	.LVL23:
  49:Core/Src/MP8862.c ****     reg |= MP8862_REG_CTL1 & MP8862_EN;
 276              		.loc 1 49 5 is_stmt 1 view .LVU54
  50:Core/Src/MP8862.c ****     return success & MP8862_write(_MP8862, MP8862_REG_CTL1 , &reg, 1 );
 277              		.loc 1 50 5 view .LVU55
 278              		.loc 1 50 22 is_stmt 0 view .LVU56
 279 0014 0123     		movs	r3, #1
 280 0016 6A46     		mov	r2, sp
 281 0018 0732     		adds	r2, r2, #7
 282 001a 0421     		movs	r1, #4
 283 001c 2800     		movs	r0, r5
 284 001e FFF7FEFF 		bl	MP8862_write
 285              	.LVL24:
 286              		.loc 1 50 20 view .LVU57
ARM GAS  /tmp/ccEOQkiF.s 			page 7


 287 0022 2040     		ands	r0, r4
 288 0024 C0B2     		uxtb	r0, r0
  51:Core/Src/MP8862.c **** }
 289              		.loc 1 51 1 view .LVU58
 290 0026 03B0     		add	sp, sp, #12
 291              		@ sp needed
 292              	.LVL25:
 293              	.LVL26:
 294              		.loc 1 51 1 view .LVU59
 295 0028 30BD     		pop	{r4, r5, pc}
 296              		.cfi_endproc
 297              	.LFE44:
 299              		.section	.text.MP8862_setCurrentLimit_mA,"ax",%progbits
 300              		.align	1
 301              		.global	MP8862_setCurrentLimit_mA
 302              		.syntax unified
 303              		.code	16
 304              		.thumb_func
 305              		.fpu softvfp
 307              	MP8862_setCurrentLimit_mA:
 308              	.LVL27:
 309              	.LFB45:
  52:Core/Src/MP8862.c **** 
  53:Core/Src/MP8862.c **** uint8_t MP8862_setCurrentLimit_mA(struct MP8862_t *_MP8862, uint16_t current_mA) {
 310              		.loc 1 53 82 is_stmt 1 view -0
 311              		.cfi_startproc
 312              		@ args = 0, pretend = 0, frame = 8
 313              		@ frame_needed = 0, uses_anonymous_args = 0
 314              		.loc 1 53 82 is_stmt 0 view .LVU61
 315 0000 00B5     		push	{lr}
 316              	.LCFI8:
 317              		.cfi_def_cfa_offset 4
 318              		.cfi_offset 14, -4
 319 0002 83B0     		sub	sp, sp, #12
 320              	.LCFI9:
 321              		.cfi_def_cfa_offset 16
 322 0004 0A00     		movs	r2, r1
  54:Core/Src/MP8862.c ****     if( current_mA  > _MP8862->IOUT_soft_limit_mA ){
 323              		.loc 1 54 5 is_stmt 1 view .LVU62
 324              		.loc 1 54 30 is_stmt 0 view .LVU63
 325 0006 0389     		ldrh	r3, [r0, #8]
 326              		.loc 1 54 7 view .LVU64
 327 0008 8B42     		cmp	r3, r1
 328 000a 18D3     		bcc	.L11
  55:Core/Src/MP8862.c ****         return 0;
  56:Core/Src/MP8862.c ****     }
  57:Core/Src/MP8862.c ****     if(current_mA > 4025){ // highest permitted value producing int part 80
 329              		.loc 1 57 5 is_stmt 1 view .LVU65
 330              		.loc 1 57 7 is_stmt 0 view .LVU66
 331 000c 0D4B     		ldr	r3, .L13
 332 000e 9942     		cmp	r1, r3
 333 0010 00D9     		bls	.L10
  58:Core/Src/MP8862.c ****         current_mA = 4025; // 4.0 A max (I_LIM = 0x50)
 334              		.loc 1 58 20 view .LVU67
 335 0012 1A00     		movs	r2, r3
 336              	.L10:
 337              	.LVL28:
ARM GAS  /tmp/ccEOQkiF.s 			page 8


  59:Core/Src/MP8862.c ****     }
  60:Core/Src/MP8862.c ****     uint32_t limit_raw = (current_mA * 1311 + (24 * 1311)) >> 16; // * 0.02 (~ 1311/65536)
 338              		.loc 1 60 5 is_stmt 1 view .LVU68
 339              		.loc 1 60 38 is_stmt 0 view .LVU69
 340 0014 9300     		lsls	r3, r2, #2
 341 0016 9B18     		adds	r3, r3, r2
 342 0018 DB00     		lsls	r3, r3, #3
 343 001a 9918     		adds	r1, r3, r2
 344 001c 4901     		lsls	r1, r1, #5
 345 001e 891A     		subs	r1, r1, r2
 346              		.loc 1 60 45 view .LVU70
 347 0020 094B     		ldr	r3, .L13+4
 348 0022 9C46     		mov	ip, r3
 349 0024 6144     		add	r1, r1, ip
 350              		.loc 1 60 60 view .LVU71
 351 0026 0914     		asrs	r1, r1, #16
 352              	.LVL29:
  61:Core/Src/MP8862.c ****     uint8_t tmp = limit_raw & 0x7F;
 353              		.loc 1 61 5 is_stmt 1 view .LVU72
 354              		.loc 1 61 29 is_stmt 0 view .LVU73
 355 0028 7F23     		movs	r3, #127
 356 002a 1940     		ands	r1, r3
 357              	.LVL30:
 358              		.loc 1 61 13 view .LVU74
 359 002c 6B46     		mov	r3, sp
 360 002e DA1D     		adds	r2, r3, #7
 361              	.LVL31:
 362              		.loc 1 61 13 view .LVU75
 363 0030 1170     		strb	r1, [r2]
  62:Core/Src/MP8862.c ****     return MP8862_write(_MP8862, MP8862_REG_IOUT_LIM , &tmp, 1 );
 364              		.loc 1 62 5 is_stmt 1 view .LVU76
 365              		.loc 1 62 12 is_stmt 0 view .LVU77
 366 0032 0123     		movs	r3, #1
 367 0034 0321     		movs	r1, #3
 368 0036 FFF7FEFF 		bl	MP8862_write
 369              	.LVL32:
 370              	.L9:
  63:Core/Src/MP8862.c **** }
 371              		.loc 1 63 1 view .LVU78
 372 003a 03B0     		add	sp, sp, #12
 373              		@ sp needed
 374 003c 00BD     		pop	{pc}
 375              	.LVL33:
 376              	.L11:
  55:Core/Src/MP8862.c ****     }
 377              		.loc 1 55 16 view .LVU79
 378 003e 0020     		movs	r0, #0
 379              	.LVL34:
  55:Core/Src/MP8862.c ****     }
 380              		.loc 1 55 16 view .LVU80
 381 0040 FBE7     		b	.L9
 382              	.L14:
 383 0042 C046     		.align	2
 384              	.L13:
 385 0044 B90F0000 		.word	4025
 386 0048 E87A0000 		.word	31464
 387              		.cfi_endproc
ARM GAS  /tmp/ccEOQkiF.s 			page 9


 388              	.LFE45:
 390              		.section	.text.MP8862_readCurrentLimit_mA,"ax",%progbits
 391              		.align	1
 392              		.global	MP8862_readCurrentLimit_mA
 393              		.syntax unified
 394              		.code	16
 395              		.thumb_func
 396              		.fpu softvfp
 398              	MP8862_readCurrentLimit_mA:
 399              	.LVL35:
 400              	.LFB46:
  64:Core/Src/MP8862.c **** 
  65:Core/Src/MP8862.c **** uint8_t MP8862_readCurrentLimit_mA(struct MP8862_t *_MP8862, uint16_t *current_mA) {
 401              		.loc 1 65 84 is_stmt 1 view -0
 402              		.cfi_startproc
 403              		@ args = 0, pretend = 0, frame = 8
 404              		@ frame_needed = 0, uses_anonymous_args = 0
 405              		.loc 1 65 84 is_stmt 0 view .LVU82
 406 0000 30B5     		push	{r4, r5, lr}
 407              	.LCFI10:
 408              		.cfi_def_cfa_offset 12
 409              		.cfi_offset 4, -12
 410              		.cfi_offset 5, -8
 411              		.cfi_offset 14, -4
 412 0002 83B0     		sub	sp, sp, #12
 413              	.LCFI11:
 414              		.cfi_def_cfa_offset 24
 415 0004 0C00     		movs	r4, r1
  66:Core/Src/MP8862.c ****     uint8_t success;
 416              		.loc 1 66 5 is_stmt 1 view .LVU83
  67:Core/Src/MP8862.c ****     uint8_t tmp;
 417              		.loc 1 67 5 view .LVU84
  68:Core/Src/MP8862.c ****     success = MP8862_read(_MP8862, MP8862_REG_IOUT_LIM , &tmp, 1 );
 418              		.loc 1 68 5 view .LVU85
 419              		.loc 1 68 15 is_stmt 0 view .LVU86
 420 0006 6B46     		mov	r3, sp
 421 0008 DD1D     		adds	r5, r3, #7
 422 000a 0123     		movs	r3, #1
 423 000c 2A00     		movs	r2, r5
 424 000e 0321     		movs	r1, #3
 425              	.LVL36:
 426              		.loc 1 68 15 view .LVU87
 427 0010 FFF7FEFF 		bl	MP8862_read
 428              	.LVL37:
  69:Core/Src/MP8862.c ****     *current_mA = (tmp & 0x7F) * 50; // scale by 50 mA / LSB
 429              		.loc 1 69 5 is_stmt 1 view .LVU88
 430              		.loc 1 69 17 is_stmt 0 view .LVU89
 431 0014 2A78     		ldrb	r2, [r5]
 432 0016 7F23     		movs	r3, #127
 433 0018 1340     		ands	r3, r2
 434 001a 3222     		movs	r2, #50
 435 001c 5343     		muls	r3, r2
 436 001e 2380     		strh	r3, [r4]
  70:Core/Src/MP8862.c ****     return success;
 437              		.loc 1 70 5 is_stmt 1 view .LVU90
  71:Core/Src/MP8862.c **** }
 438              		.loc 1 71 1 is_stmt 0 view .LVU91
ARM GAS  /tmp/ccEOQkiF.s 			page 10


 439 0020 03B0     		add	sp, sp, #12
 440              		@ sp needed
 441              	.LVL38:
 442              		.loc 1 71 1 view .LVU92
 443 0022 30BD     		pop	{r4, r5, pc}
 444              		.cfi_endproc
 445              	.LFE46:
 447              		.section	.text.MP8862_setVoltageSetpoint_mV,"ax",%progbits
 448              		.align	1
 449              		.global	MP8862_setVoltageSetpoint_mV
 450              		.syntax unified
 451              		.code	16
 452              		.thumb_func
 453              		.fpu softvfp
 455              	MP8862_setVoltageSetpoint_mV:
 456              	.LVL39:
 457              	.LFB47:
  72:Core/Src/MP8862.c **** 
  73:Core/Src/MP8862.c **** uint8_t MP8862_setVoltageSetpoint_mV(struct MP8862_t *_MP8862, uint16_t voltage_mV) {
 458              		.loc 1 73 85 is_stmt 1 view -0
 459              		.cfi_startproc
 460              		@ args = 0, pretend = 0, frame = 8
 461              		@ frame_needed = 0, uses_anonymous_args = 0
 462              		.loc 1 73 85 is_stmt 0 view .LVU94
 463 0000 00B5     		push	{lr}
 464              	.LCFI12:
 465              		.cfi_def_cfa_offset 4
 466              		.cfi_offset 14, -4
 467 0002 83B0     		sub	sp, sp, #12
 468              	.LCFI13:
 469              		.cfi_def_cfa_offset 16
  74:Core/Src/MP8862.c ****     if( voltage_mV  > _MP8862->VOUT_soft_limit_mV ){
 470              		.loc 1 74 5 is_stmt 1 view .LVU95
 471              		.loc 1 74 30 is_stmt 0 view .LVU96
 472 0004 C388     		ldrh	r3, [r0, #6]
 473              		.loc 1 74 7 view .LVU97
 474 0006 8B42     		cmp	r3, r1
 475 0008 1CD3     		bcc	.L19
  75:Core/Src/MP8862.c ****         return 0;
  76:Core/Src/MP8862.c ****     }
  77:Core/Src/MP8862.c ****     if( voltage_mV > 20480 ){ // highest permitted value producing int part 2047
 476              		.loc 1 77 5 is_stmt 1 view .LVU98
 477              		.loc 1 77 7 is_stmt 0 view .LVU99
 478 000a A023     		movs	r3, #160
 479 000c DB01     		lsls	r3, r3, #7
 480 000e 9942     		cmp	r1, r3
 481 0010 00D9     		bls	.L18
  78:Core/Src/MP8862.c ****         voltage_mV = 20480; // 20.47 V max (VOUT = 2047)
 482              		.loc 1 78 20 view .LVU100
 483 0012 1900     		movs	r1, r3
 484              	.LVL40:
 485              	.L18:
  79:Core/Src/MP8862.c ****     }
  80:Core/Src/MP8862.c ****     uint8_t tmp[3];
 486              		.loc 1 80 5 is_stmt 1 view .LVU101
  81:Core/Src/MP8862.c ****     uint32_t voltage_raw = (voltage_mV * 819 + (5 * 819)) >> 13; // * 0.1 (~ 819/8192)
 487              		.loc 1 81 5 view .LVU102
ARM GAS  /tmp/ccEOQkiF.s 			page 11


 488              		.loc 1 81 40 is_stmt 0 view .LVU103
 489 0014 4B00     		lsls	r3, r1, #1
 490 0016 5B18     		adds	r3, r3, r1
 491 0018 9B00     		lsls	r3, r3, #2
 492 001a 5B18     		adds	r3, r3, r1
 493 001c 9901     		lsls	r1, r3, #6
 494              	.LVL41:
 495              		.loc 1 81 40 view .LVU104
 496 001e C91A     		subs	r1, r1, r3
 497              		.loc 1 81 46 view .LVU105
 498 0020 094B     		ldr	r3, .L21
 499 0022 9C46     		mov	ip, r3
 500 0024 6144     		add	r1, r1, ip
 501              		.loc 1 81 59 view .LVU106
 502 0026 4913     		asrs	r1, r1, #13
 503              	.LVL42:
  82:Core/Src/MP8862.c ****     tmp[0] = voltage_raw & 0x07;                 // VOUT_L value = voltage_raw[ 2:0]
 504              		.loc 1 82 5 is_stmt 1 view .LVU107
 505              		.loc 1 82 26 is_stmt 0 view .LVU108
 506 0028 0723     		movs	r3, #7
 507 002a 0B40     		ands	r3, r1
 508              		.loc 1 82 12 view .LVU109
 509 002c 01AA     		add	r2, sp, #4
 510 002e 1370     		strb	r3, [r2]
  83:Core/Src/MP8862.c ****     tmp[1] = (voltage_raw >> 3) & 0xFF;          // VOUT_H value = voltage_raw[10:3]
 511              		.loc 1 83 5 is_stmt 1 view .LVU110
 512              		.loc 1 83 27 is_stmt 0 view .LVU111
 513 0030 C908     		lsrs	r1, r1, #3
 514              	.LVL43:
 515              		.loc 1 83 12 view .LVU112
 516 0032 5170     		strb	r1, [r2, #1]
  84:Core/Src/MP8862.c ****     tmp[2] = MP8862_GO_BIT; // Apply VOUT changes by setting the GO bit right after updating VOUT.
 517              		.loc 1 84 5 is_stmt 1 view .LVU113
 518              		.loc 1 84 12 is_stmt 0 view .LVU114
 519 0034 0123     		movs	r3, #1
 520 0036 9370     		strb	r3, [r2, #2]
  85:Core/Src/MP8862.c ****     return MP8862_write(_MP8862, MP8862_REG_VOUT_L , tmp, 3 );
 521              		.loc 1 85 5 is_stmt 1 view .LVU115
 522              		.loc 1 85 12 is_stmt 0 view .LVU116
 523 0038 0233     		adds	r3, r3, #2
 524 003a 0021     		movs	r1, #0
 525 003c FFF7FEFF 		bl	MP8862_write
 526              	.LVL44:
 527              	.L17:
  86:Core/Src/MP8862.c **** }
 528              		.loc 1 86 1 view .LVU117
 529 0040 03B0     		add	sp, sp, #12
 530              		@ sp needed
 531 0042 00BD     		pop	{pc}
 532              	.LVL45:
 533              	.L19:
  75:Core/Src/MP8862.c ****     }
 534              		.loc 1 75 16 view .LVU118
 535 0044 0020     		movs	r0, #0
 536              	.LVL46:
  75:Core/Src/MP8862.c ****     }
 537              		.loc 1 75 16 view .LVU119
ARM GAS  /tmp/ccEOQkiF.s 			page 12


 538 0046 FBE7     		b	.L17
 539              	.L22:
 540              		.align	2
 541              	.L21:
 542 0048 FF0F0000 		.word	4095
 543              		.cfi_endproc
 544              	.LFE47:
 546              		.section	.text.MP8862_readVoltageSetpoint_mV,"ax",%progbits
 547              		.align	1
 548              		.global	MP8862_readVoltageSetpoint_mV
 549              		.syntax unified
 550              		.code	16
 551              		.thumb_func
 552              		.fpu softvfp
 554              	MP8862_readVoltageSetpoint_mV:
 555              	.LVL47:
 556              	.LFB48:
  87:Core/Src/MP8862.c **** 
  88:Core/Src/MP8862.c **** uint8_t MP8862_readVoltageSetpoint_mV(struct MP8862_t *_MP8862, uint16_t *voltage_mV) {
 557              		.loc 1 88 87 is_stmt 1 view -0
 558              		.cfi_startproc
 559              		@ args = 0, pretend = 0, frame = 8
 560              		@ frame_needed = 0, uses_anonymous_args = 0
 561              		.loc 1 88 87 is_stmt 0 view .LVU121
 562 0000 10B5     		push	{r4, lr}
 563              	.LCFI14:
 564              		.cfi_def_cfa_offset 8
 565              		.cfi_offset 4, -8
 566              		.cfi_offset 14, -4
 567 0002 82B0     		sub	sp, sp, #8
 568              	.LCFI15:
 569              		.cfi_def_cfa_offset 16
 570 0004 0C00     		movs	r4, r1
  89:Core/Src/MP8862.c ****     uint8_t success;
 571              		.loc 1 89 5 is_stmt 1 view .LVU122
  90:Core/Src/MP8862.c ****     uint8_t tmp[2];
 572              		.loc 1 90 5 view .LVU123
  91:Core/Src/MP8862.c ****     success = MP8862_read(_MP8862, MP8862_REG_VOUT_L , tmp, 2 );
 573              		.loc 1 91 5 view .LVU124
 574              		.loc 1 91 15 is_stmt 0 view .LVU125
 575 0006 0223     		movs	r3, #2
 576 0008 01AA     		add	r2, sp, #4
 577 000a 0021     		movs	r1, #0
 578              	.LVL48:
 579              		.loc 1 91 15 view .LVU126
 580 000c FFF7FEFF 		bl	MP8862_read
 581              	.LVL49:
  92:Core/Src/MP8862.c ****     *voltage_mV = (tmp[1] << 3 | (tmp[0] & 0x07)) * 10; // scale by 10 mV / LSB
 582              		.loc 1 92 5 is_stmt 1 view .LVU127
 583              		.loc 1 92 23 is_stmt 0 view .LVU128
 584 0010 6B46     		mov	r3, sp
 585 0012 5B79     		ldrb	r3, [r3, #5]
 586              		.loc 1 92 27 view .LVU129
 587 0014 DB00     		lsls	r3, r3, #3
 588              		.loc 1 92 38 view .LVU130
 589 0016 6A46     		mov	r2, sp
 590 0018 1179     		ldrb	r1, [r2, #4]
ARM GAS  /tmp/ccEOQkiF.s 			page 13


 591              		.loc 1 92 42 view .LVU131
 592 001a 0722     		movs	r2, #7
 593 001c 0A40     		ands	r2, r1
 594              		.loc 1 92 32 view .LVU132
 595 001e 1343     		orrs	r3, r2
 596              		.loc 1 92 17 view .LVU133
 597 0020 9A00     		lsls	r2, r3, #2
 598 0022 9B18     		adds	r3, r3, r2
 599 0024 5B00     		lsls	r3, r3, #1
 600 0026 2380     		strh	r3, [r4]
  93:Core/Src/MP8862.c ****     return success;
 601              		.loc 1 93 5 is_stmt 1 view .LVU134
  94:Core/Src/MP8862.c **** }
 602              		.loc 1 94 1 is_stmt 0 view .LVU135
 603 0028 02B0     		add	sp, sp, #8
 604              		@ sp needed
 605              	.LVL50:
 606              		.loc 1 94 1 view .LVU136
 607 002a 10BD     		pop	{r4, pc}
 608              		.cfi_endproc
 609              	.LFE48:
 611              		.section	.text.MP8862_readPG,"ax",%progbits
 612              		.align	1
 613              		.global	MP8862_readPG
 614              		.syntax unified
 615              		.code	16
 616              		.thumb_func
 617              		.fpu softvfp
 619              	MP8862_readPG:
 620              	.LVL51:
 621              	.LFB49:
  95:Core/Src/MP8862.c **** 
  96:Core/Src/MP8862.c **** uint8_t MP8862_readPG(struct MP8862_t *_MP8862) {
 622              		.loc 1 96 49 is_stmt 1 view -0
 623              		.cfi_startproc
 624              		@ args = 0, pretend = 0, frame = 8
 625              		@ frame_needed = 0, uses_anonymous_args = 0
 626              		.loc 1 96 49 is_stmt 0 view .LVU138
 627 0000 00B5     		push	{lr}
 628              	.LCFI16:
 629              		.cfi_def_cfa_offset 4
 630              		.cfi_offset 14, -4
 631 0002 83B0     		sub	sp, sp, #12
 632              	.LCFI17:
 633              		.cfi_def_cfa_offset 16
  97:Core/Src/MP8862.c ****     uint8_t SR;
 634              		.loc 1 97 5 is_stmt 1 view .LVU139
  98:Core/Src/MP8862.c ****     uint8_t success = MP8862_read(_MP8862, MP8862_REG_STATUS, &SR, 1);
 635              		.loc 1 98 5 view .LVU140
 636              		.loc 1 98 23 is_stmt 0 view .LVU141
 637 0004 0123     		movs	r3, #1
 638 0006 6A46     		mov	r2, sp
 639 0008 0732     		adds	r2, r2, #7
 640 000a 0921     		movs	r1, #9
 641 000c FFF7FEFF 		bl	MP8862_read
 642              	.LVL52:
  99:Core/Src/MP8862.c ****     return success && ((SR & MP8862_STATUS_PG) != 0);
ARM GAS  /tmp/ccEOQkiF.s 			page 14


 643              		.loc 1 99 5 is_stmt 1 view .LVU142
 644              		.loc 1 99 20 is_stmt 0 view .LVU143
 645 0010 0028     		cmp	r0, #0
 646 0012 07D0     		beq	.L26
 647              		.loc 1 99 48 discriminator 1 view .LVU144
 648 0014 6B46     		mov	r3, sp
 649 0016 0733     		adds	r3, r3, #7
 650 0018 1B78     		ldrb	r3, [r3]
 651 001a 5BB2     		sxtb	r3, r3
 652              		.loc 1 99 20 discriminator 1 view .LVU145
 653 001c 002B     		cmp	r3, #0
 654 001e 05DB     		blt	.L27
 655              		.loc 1 99 20 view .LVU146
 656 0020 0020     		movs	r0, #0
 657              	.LVL53:
 658              		.loc 1 99 20 view .LVU147
 659 0022 00E0     		b	.L25
 660              	.LVL54:
 661              	.L26:
 662              		.loc 1 99 20 view .LVU148
 663 0024 0020     		movs	r0, #0
 664              	.LVL55:
 665              	.L25:
 666              		.loc 1 99 20 discriminator 6 view .LVU149
 667 0026 C0B2     		uxtb	r0, r0
 100:Core/Src/MP8862.c **** }
 668              		.loc 1 100 1 discriminator 6 view .LVU150
 669 0028 03B0     		add	sp, sp, #12
 670              		@ sp needed
 671 002a 00BD     		pop	{pc}
 672              	.LVL56:
 673              	.L27:
  99:Core/Src/MP8862.c ****     return success && ((SR & MP8862_STATUS_PG) != 0);
 674              		.loc 1 99 20 view .LVU151
 675 002c 0120     		movs	r0, #1
 676              	.LVL57:
  99:Core/Src/MP8862.c ****     return success && ((SR & MP8862_STATUS_PG) != 0);
 677              		.loc 1 99 20 view .LVU152
 678 002e FAE7     		b	.L25
 679              		.cfi_endproc
 680              	.LFE49:
 682              		.text
 683              	.Letext0:
 684              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 685              		.file 3 "Drivers/CMSIS/Device/ST/STM32F0xx/Include/system_stm32f0xx.h"
 686              		.file 4 "Drivers/CMSIS/Device/ST/STM32F0xx/Include/stm32f072xb.h"
 687              		.file 5 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal_def.h"
 688              		.file 6 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal_dma.h"
 689              		.file 7 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal_i2c.h"
 690              		.file 8 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal.h"
 691              		.file 9 "Core/Inc/MP8862.h"
ARM GAS  /tmp/ccEOQkiF.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 MP8862.c
     /tmp/ccEOQkiF.s:16     .text.MP8862_isReady:0000000000000000 $t
     /tmp/ccEOQkiF.s:24     .text.MP8862_isReady:0000000000000000 MP8862_isReady
     /tmp/ccEOQkiF.s:61     .text.MP8862_init:0000000000000000 $t
     /tmp/ccEOQkiF.s:68     .text.MP8862_init:0000000000000000 MP8862_init
     /tmp/ccEOQkiF.s:109    .text.MP8862_init:0000000000000018 $d
     /tmp/ccEOQkiF.s:115    .text.MP8862_write:0000000000000000 $t
     /tmp/ccEOQkiF.s:122    .text.MP8862_write:0000000000000000 MP8862_write
     /tmp/ccEOQkiF.s:176    .text.MP8862_read:0000000000000000 $t
     /tmp/ccEOQkiF.s:183    .text.MP8862_read:0000000000000000 MP8862_read
     /tmp/ccEOQkiF.s:237    .text.MP8862_setEnable:0000000000000000 $t
     /tmp/ccEOQkiF.s:244    .text.MP8862_setEnable:0000000000000000 MP8862_setEnable
     /tmp/ccEOQkiF.s:300    .text.MP8862_setCurrentLimit_mA:0000000000000000 $t
     /tmp/ccEOQkiF.s:307    .text.MP8862_setCurrentLimit_mA:0000000000000000 MP8862_setCurrentLimit_mA
     /tmp/ccEOQkiF.s:385    .text.MP8862_setCurrentLimit_mA:0000000000000044 $d
     /tmp/ccEOQkiF.s:391    .text.MP8862_readCurrentLimit_mA:0000000000000000 $t
     /tmp/ccEOQkiF.s:398    .text.MP8862_readCurrentLimit_mA:0000000000000000 MP8862_readCurrentLimit_mA
     /tmp/ccEOQkiF.s:448    .text.MP8862_setVoltageSetpoint_mV:0000000000000000 $t
     /tmp/ccEOQkiF.s:455    .text.MP8862_setVoltageSetpoint_mV:0000000000000000 MP8862_setVoltageSetpoint_mV
     /tmp/ccEOQkiF.s:542    .text.MP8862_setVoltageSetpoint_mV:0000000000000048 $d
     /tmp/ccEOQkiF.s:547    .text.MP8862_readVoltageSetpoint_mV:0000000000000000 $t
     /tmp/ccEOQkiF.s:554    .text.MP8862_readVoltageSetpoint_mV:0000000000000000 MP8862_readVoltageSetpoint_mV
     /tmp/ccEOQkiF.s:612    .text.MP8862_readPG:0000000000000000 $t
     /tmp/ccEOQkiF.s:619    .text.MP8862_readPG:0000000000000000 MP8862_readPG

UNDEFINED SYMBOLS
HAL_I2C_IsDeviceReady
HAL_I2C_Mem_Write
HAL_I2C_Mem_Read
